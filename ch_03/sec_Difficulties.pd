Основные проблемы и их решения
-------------------------------


### Отсутствие документации ### 

Самой неприятно проблемой стало то, что четкой спецификации виртуальной машины Dalvik не существует.
В официальной документации можно найти подробное описание формата DEX и список инструкций виртуальной машины
с кратким описанием каждой, чего, как оказалось, не достаточно для реализации.

Часто основным источником информации о семантике той или иной инструкции служила
спецификация виртуальной машины Java (JVM)[@jvmspec]. С одной стороны, разработчики
виртуальной машины Dalvik не заявляют никакой совместимости с JVM, так что, формально,
эта спецификация не имеет никакого отношения к Dalvik.
С другой стороны, Dalvik существует для того, чтобы исполнять Java-программы,
таким образом, скорее всего, спецификацию JVM можно считать хорошим источником сведений
о требуемом поведении инструкций Dalvik.

Нередко возникали ситуации, когда за разъяснениями приходилось обращаться к исходному
коду, благо исходный код виртуальной машины размещен в свободном доступе.


### Численные типы ###

TODO длинный рассказ о том, что в JS только один вид чисел — 64-битный флоты, потому
приходится аккуратно работать с арифметикой и, что еще веселее, представлять
целые 64-битный числа двумя JS-ными.


### Потоки ###

Тут должен быть рассказ про shared memory, веб-воркеров, защиту от стрельбы в ногу
с помощью отсутствия shared state и что приходится предпринимать, чтобы на всём
этом эмулировать те самые потоки с той самой shared memory.
